{
  "hash": "801f6dd74b4d5032a0f78624a772cef8",
  "result": {
    "markdown": "---\ntitle: \"Automatic website with the Geocomputation with R solutions\" \nauthor: Jakub Nowosad\ndate: \"2022-02-24\"\nslug: geocompr-solutions\ncategories: [vignette]\ntags: [geocompr2, solutions, rstats]\ndraft: false\n---\n\n\n[Geocomputation with R](https://geocompr.robinlovelace.net/) is a book on geographic data analysis, visualization, and modeling.\nEach chapter^[Except the last one.] ends with a set of exercises allowing the readers to test how well they understand each presented concepts and approaches. \nHowever, exercises are often not enough without their solutions, which provides a way to compare readers' answers with an expected one.\nThis leads to technical questions: how to provide solutions to the exercises without making the book too long, and to minimise duplication of words/effort (for the questions and answers)? Also, how to test, at the same time, if the solutions are still working?\n\nFor [the first edition of the book](https://bookdown.org/robinlovelace/geocompr/) we added solutions as external set of [vignettes](https://geocompr.github.io/vignettes/). \nThis approach had, however, several flaws.\nMost importantly, solutions in the vignettes were detached from the exercises in the book, meaning that if we decided to change an exercise, we would need to go to a different repository and update it there as well.\nAdditionally, the solution vignettes had a different style from the book and were harder to find.\nWe decided to try a different approach for the second edition of the book. \nThis time, we created an external bookdown-based website for solutions, which you can find at https://geocompr.github.io/solutions/.\nThe main goal of this blog post is to explain the new setup in some detail.\n\n## New solutions website\n\nFirstly, let's take a look at the bigger picture.\nExercises are shown at the end of the book chapters, for example, exercises for chapter 6 can be seen at https://geocompr.robinlovelace.net/raster-vector.html#exercises-4.\nYou may notice that this exercises section starts with a description of prerequisites, and then several questions are listed.\nHowever, what to do when I want to find solutions to these problems or compare my results with those provided by the book authors?\nThen, we can visit the corresponding chapter in the solution website at https://geocompr.github.io/solutions/raster-vector.html.\nNote that the solution website contains the same content as the exercises section, and extends it with the solution code, code results, and newly created figures.\n\n## Solutions\n\nNext, let's dive deeper to see how it works.\nWe can look at the source code of the solution website first -- https://github.com/geocompr/solutions, and solutions for chapter 6 are at https://github.com/geocompr/solutions/blob/main/06-raster-vector.Rmd.\nIf you open the last link, you should see a code looking like that:\n\n````\n```{r setup, echo=FALSE, results='hide'}\nex = tempfile(fileext = \".Rmd\")\non.exit(unlink(ex))\ndownload.file(\"https://raw.githubusercontent.com/Robinlovelace/geocompr/main/_06-ex.Rmd\", ex)\n```\n\n```{r, echo=FALSE, results='asis'}\nres = knitr::knit_child(ex, quiet = TRUE, options = list(include = TRUE))\ncat(res, sep = '\\n')\n```\n````\n\nWhat is going on here?\nIn short, we have two code chunks.\nThe first (hidden) code chunk downloads a `_06-ex.Rmd` file from the `Robinlovelace/geocompr` repository.\nOk, but how does this `_06-ex.Rmd` document looks like?\nYou can see its content at https://raw.githubusercontent.com/Robinlovelace/geocompr/main/_06-ex.Rmd.\nIt is a mix of text (mainly exercises questions) and R code chunks. \nNote here that most code chunks do not have any code chunks options set, except the first one. \nWe wanted the first code chunk to be visible on the main book and the solution websites, so we used `include = TRUE`.\n\nThe second code chunk takes the downloaded document and knits it with a new global option, `include = TRUE`. \nThis option make sure that we will show all possible outputs from `_06-ex.Rmd`, including numerical results and plots.\n\n## Exercises\n\nThe above section explained how we could see exercises and solutions on the solution website. \nHowever, how is it possible that we can only see the exercise text in the book?\nLet's look at the bottom of the source code of the 6th chapter at https://github.com/Robinlovelace/geocompr/blob/main/06-raster-vector.Rmd:\n\n````\n## Exercises\n\n```{r, echo=FALSE, results='asis'}\nres = knitr::knit_child('_06-ex.Rmd', quiet = TRUE, options = list(include = FALSE, eval = FALSE))\ncat(res, sep = '\\n')\n```\n\n````\n\nThere is only one short code chunk -- it knits the same document, `_06-ex.Rmd`, however using different global options, `include = FALSE, eval = FALSE`.\nThis assures that the book's readers would not see any solutions' code chunks or their outputs.\n\n## Workflow\n\nNow we know all of the pieces of the puzzle.\nThe last step is to connect them together with GitHub Actions.\n\nOur workflow is as follows:\n\n1. We add/update/modify exercises and their solutions stored in a file per chapter, e.g., `_06-ex.Rmd`\n2. We push the changes to the main book repository on GitHub (`Robinlovelace/geocompr`)\n3. The book is automatically built using a [GitHub Actions workflow](https://github.com/Robinlovelace/geocompr/actions/workflows/main.yaml), including exercises (but not solutions!)\n4. Once a week, another [GitHub Actions workflow](https://github.com/geocompr/solutions/actions/workflows/main.yaml) runs in the solutions repository.\n\nThis approach ensures that the solutions are always up-to-date, reproducible, and in sync. with the manuscript.\nIt creates a resources dedicated to the exercises and their solutions, helping people learn.\nIt should also encourage others to get involved: can you think of another exercise or an alternative solution to existing exercises?\nYou have all the info you need to contribute now.\nLet us know your comments or suggestions at https://github.com/geocompr/solutions!\nPull Requests are also welcome!\n",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}